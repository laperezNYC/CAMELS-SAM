Description of Simulations
=====

.. _Overview:

Overview of CAMELS-SAM
------------

A complete description of the suite, its creation, and application can be found in Perez, Genel, et al. (2023, in press as of July 2023): https://arxiv.org/abs/2204.02408 .

The backbone of CAMELS-SAM are the 1,000+ N-body only ``AREPO`` simulations we generated across 100 snapshots between :math:`z=127` to :math:`z=0` across the broad cosmological parameter space of CAMELS. Each simulation was run through ``ROCKSTAR`` to generate halo catalogs at each snapshot, and then ``ConsistentTrees`` to generate merger trees. We feed this finely sampled merger tree history into the ``Santa Cruz semi-analytic model`` (SC-SAM, hence CAMELS-SAM) for galaxy formation. The parameters we vary across the suite are :math:`\Omega_{\rm M}`, :math:`\sigma_{8}`, :math:`A_{\rm SN1}`, :math:`A_{\rm SN2}`, and :math:`A_{\rm AGN}`. The later 3 are pre-factors to three SC-SAM parameters controlling, respectively, the amplitude and rate of mass outflow from massive stars out of a galaxy, and the strength of the radio jet mode of AGN.

In this documentation, **simulation** indicates that there exists an N-body only simulation (i.e. snapshots) that generated the product; **simulation products** refers to the ``ROCKSTAR`` and ``ConsistentTrees`` products generated from the simulations; and **galaxy catalog** refers to the output halo and subhalo/galaxy catalogs that the Santa Cruz SAM generated. The raw simulations are enormously large (>450TB after compression), and are therefore not able to be publically released as the CAMELS snapshots are. Please contact the CAMELS team to discuss access to the CAMELS-SAM snapshots, and otherwise refer to the CAMELS data acess instructions for how to access everything else: https://camels.readthedocs.io/en/latest/data_access.html.


Simulation sets within the suite
------------

Within CAMELS-SAM, these are these three sets of products publically released:

- | **LH**. This set contains 1,000 simulation products and galaxy catalogs. Each simulation has a different value of the cosmological and astrophysical parameters, are arranged in a latin-hypercube. Each simulation has a different value of the initial random seed. This set represents the main CAMELS-SAM dataset. LH stands for Latin-Hypercube. These can be found within ``camels/PUBLIC_RELEASE/SCSAM/LH_?`` .
- | **CV**. This set contains 5 simulation products and galaxy catalogs. All the simulations share the value of the cosmological and astrophysical parameters, and they only differ in the value of their initial random seed. This set is typically used to study the effect of cosmic variance due to the simulated volume size. CV stands for Cosmic Variance. These can be found within ``camels/PUBLIC_RELEASE/SCSAM/CV_?`` .
- | **1P**. This set contains 12 galaxy catalogs. In this set, the SC-SAM was run at the smallest and largest value of each SAM parameter for two of the CV simulations (:math:`0,1`). The value of the random seed is the same in all galaxy catalogs generated atop the same CV simulation. This set can be used to study the change induced by the astrophysical SC-SAM parameters in a given quantity. 1P stands for 1-parameter at a time. (We emphasize this differs from the CAMELS 1P set, which more finely samples the parameter space and also focus on the cosmological parameters.) These can be found within These can be found within ``camels/PUBLIC_RELEASE/SCSAM/CV_0`` and ``CV_1``, in folders named e.g. ``Asn1x0p25-sc-sam`` .


Characteristics
------------

The CAMELS-SAM simulations follow the evolution of :math:`640^3` dark matter particles within a periodic comoving volume of :math:`(100~h^{-1}{\rm cMpc})^3` from :math:`z=127` down to :math:`z=0`. All simulations share the value of these cosmological parameters:

+-----------------------+-----------+----------------+-----------+---------------+-----------------+
|:math:`\Omega_{\rm b}` |:math:`h`  |:math:`n_s`     |:math:`w`  |:math:`M_\nu`  |:math:`\Omega_k` | 
+=======================+===========+================+===========+===============+=================+
|0.049                  |0.6711     |0.9624          |-1         |0.0 eV         |0.0              |
+-----------------------+-----------+----------------+-----------+---------------+-----------------+
	   
CAMELS-SAM has been designed to sample the parameter space of cosmology (by varying :math:`\Omega_{\rm M}` and :math:`\sigma_8`) and of the feedback astrophysics in the SC-SAM model (by varying :math:`A_{\rm SN1}`, :math:`A_{\rm SN2}`, and :math:`A_{\rm AGN}`). The physical meaning of these parameters is such:

+-----------------------+---------------------------------------------------------------+-------------------------------+
|Parameter              |Meaning                                                        | Parameter coverage            | 
+=======================+===============================================================+===============================+
|:math:`\Omega_{\rm m}` |Fraction of energy density in matter (dark matter + baryons)   |[0.1,0.5] linearly, fid.=0.3   |
+-----------------------+---------------------------------------------------------------+-------------------------------+
|:math:`\sigma_8`       |Variance of the linear field on :math:`8~h^{-1}{\rm Mpc}`      |[0.6,1.0] linearly, fid.=0.8   |
|                       |at :math:`z=0`                                                 |                               |
+-----------------------+---------------------------------------------------------------+-------------------------------+
|:math:`A_{\rm SN1}`    |Normalization of mass outflow rate of cold gas due to SN winds;|[0.25,4.0] logarithmically,    |
|                       |SN feedback efficiency (Somerville et al. 2015, Eq. 2)         |fid.=1.0                       |
+-----------------------+---------------------------------------------------------------+-------------------------------+
|:math:`A_{\rm SN2}`    |Power-law slope of mass outflow rate;                          |[-2.0,2.0] linearly,           |
|                       |SN feedback slope (Somerville et al. 2015, Eq. 2)              |fid.=1.0                       |
+-----------------------+---------------------------------------------------------------+-------------------------------+
|:math:`A_{\rm AGN}`    |Normalization of 'radio mode' AGN feedback                     |[0.25,4.0] logarithmically,    |
|                       |(Somerville et al. 2008, Eq. 20)                               |fid.=1.0                       |
+-----------------------+---------------------------------------------------------------+-------------------------------+

We note that each simulation's file describing their parameter, ``CosmoAstro_params.txt``, lists the for the astrophysical parameters the convolution with the base fiducial SC-SAM value. Therefore, each file will list: :math:`\Omega_{\rm m}` , :math:`\sigma_8` , :math:`A_{\rm SN1} \times 1.7`, :math:`A_{\rm SN2} + 3`, :math:`A_{\rm AGN} \times 0.002` , and a vestigial parameter set to 0.5.

Redshifts
------------
The CAMELS-SAM simulations were generated over 100 snapshots between z=20 and z=0, following the same steps as ``IllustrisTNG``:

.. raw:: html

   <details>
   <summary> Click to expand/collapse this very large table of snapshot number | redshifts | age of universe | lookback time </summary>

+------------+------------+-----------+---------------------+
|Snapshot[#] | Redshift   | Age [Gyr] | Lookback time [Gyr] |   
+============+============+===========+=====================+
|0	     |20.05       |0.179      | 13.624              |
+------------+------------+-----------+---------------------+
|1	     |14.99       |0.271      | 13.532              |
+------------+------------+-----------+---------------------+
|2	     |11.98       |0.370      | 13.433              |
+------------+------------+-----------+---------------------+
|3	     |10.98       |0.418      | 13.385              |
+------------+------------+-----------+---------------------+
|4	     |10.00       |0.475      | 13.328              |
+------------+------------+-----------+---------------------+
|5	     |9.39        |0.517      | 13.286              |
+------------+------------+-----------+---------------------+
|6	     |9.00        |0.547      | 13.256              |
+------------+------------+-----------+---------------------+
|7	     |8.45        |0.596      | 13.207              |
+------------+------------+-----------+---------------------+
|8	     |8.01        |0.640      | 13.163              |
+------------+------------+-----------+---------------------+
|9	     |7.60        |0.687      | 13.116              |
+------------+------------+-----------+---------------------+
|10          |7.24        |0.732      | 13.071              |
+------------+------------+-----------+---------------------+
|11          |7.01        |0.764      | 13.039              |
+------------+------------+-----------+---------------------+
|12          |6.49        |0.844      | 12.959              |
+------------+------------+-----------+---------------------+
|13          |6.01        |0.932      | 12.871              |
+------------+------------+-----------+---------------------+
|14          |5.85        |0.965      | 12.838              |
+------------+------------+-----------+---------------------+
|15          |5.53        |1.036      | 12.767              |
+------------+------------+-----------+---------------------+
|16          |5.23        |1.112      | 12.691              |
+------------+------------+-----------+---------------------+
|17          |5.00        |1.177      | 12.626              |
+------------+------------+-----------+---------------------+
|18          |4.66        |1.282      | 12.521              |
+------------+------------+-----------+---------------------+
|19          |4.43        |1.366      | 12.437              |
+------------+------------+-----------+---------------------+
|20          |4.18        |1.466      | 12.337              |
+------------+------------+-----------+---------------------+
|21          |4.01        |1.540      | 12.263              |
+------------+------------+-----------+---------------------+
|22          |3.71        |1.689      | 12.115              |
+------------+------------+-----------+---------------------+
|23          |3.49        |1.812      | 11.991              |
+------------+------------+-----------+---------------------+
|24          |3.28        |1.944      | 11.859              |
+------------+------------+-----------+---------------------+
|25          |3.01        |2.145      | 11.658              |
+------------+------------+-----------+---------------------+
|26          |2.90        |2.238      | 11.565              |
+------------+------------+-----------+---------------------+
|27          |2.73        |2.384      | 11.419              |
+------------+------------+-----------+---------------------+
|28          |2.58        |2.539      | 11.264              |
+------------+------------+-----------+---------------------+
|29          |2.44        |2.685      | 11.118              |
+------------+------------+-----------+---------------------+
|30          |2.32        |2.839      | 10.964              |
+------------+------------+-----------+---------------------+
|31          |2.21        |2.981      | 10.823              |
+------------+------------+-----------+---------------------+
|32          |2.10        |3.129      | 10.674              |
+------------+------------+-----------+---------------------+
|33          |2.00        |3.285      | 10.519              |
+------------+------------+-----------+---------------------+
|34          |1.90        |3.447      | 10.356              |
+------------+------------+-----------+---------------------+
|35          |1.82        |3.593      | 10.210              |
+------------+------------+-----------+---------------------+
|36          |1.74        |3.744      | 10.059              |
+------------+------------+-----------+---------------------+
|37          |1.67        |3.902      |9.901                |
+------------+------------+-----------+---------------------+
|38          |1.60        |4.038      |9.766                |
+------------+------------+-----------+---------------------+
|39          |1.53        |4.206      |9.597                |
+------------+------------+-----------+---------------------+
|40          |1.50        |4.293      |9.510                |
+------------+------------+-----------+---------------------+
|41          |1.41        |4.502      |9.301                |
+------------+------------+-----------+---------------------+
|42          |1.36        |4.657      |9.147                |
+------------+------------+-----------+---------------------+
|43          |1.30        |4.816      |8.987                |
+------------+------------+-----------+---------------------+
|44          |1.25        |4.980      |8.823                |
+------------+------------+-----------+---------------------+
|45          |1.21        |5.115      |8.688                |
+------------+------------+-----------+---------------------+
|46          |1.15        |5.289      |8.514                |
+------------+------------+-----------+---------------------+
|47          |1.11        |5.431      |8.372                |
+------------+------------+-----------+---------------------+
|48          |1.07        |5.577      |8.226                |
+------------+------------+-----------+---------------------+
|49          |1.04        |5.726      |8.077                |
+------------+------------+-----------+---------------------+
|50          |1.00        |5.878      |7.925                |
+------------+------------+-----------+---------------------+
|51          |0.95        |6.073      |7.730                |
+------------+------------+-----------+---------------------+
|52          |0.92        |6.193      |7.610                |
+------------+------------+-----------+---------------------+
|53          |0.89        |6.356      |7.447                |
+------------+------------+-----------+---------------------+
|54          |0.85        |6.522      |7.281                |
+------------+------------+-----------+---------------------+
|55          |0.82        |6.692      |7.111                |
+------------+------------+-----------+---------------------+
|56          |0.79        |6.822      |6.981                |
+------------+------------+-----------+---------------------+
|57          |0.76        |6.998      |6.805                |
+------------+------------+-----------+---------------------+
|58          |0.73        |7.132      |6.671                |
+------------+------------+-----------+---------------------+
|59          |0.70        |7.314      |6.489                |
+------------+------------+-----------+---------------------+
|60          |0.68        |7.453      |6.350                |
+------------+------------+-----------+---------------------+
|61          |0.64        |7.642      |6.161                |
+------------+------------+-----------+---------------------+
|62          |0.62        |7.786      |6.017                |
+------------+------------+-----------+---------------------+
|63          |0.60        |7.932      |5.872                |
+------------+------------+-----------+---------------------+
|64          |0.58        |8.079      |5.724                |
+------------+------------+-----------+---------------------+
|65          |0.55        |8.280      |5.523                |
+------------+------------+-----------+---------------------+
|66          |0.52        |8.432      |5.371                |
+------------+------------+-----------+---------------------+
|67          |0.50        |8.587      |5.216                |
+------------+------------+-----------+---------------------+
|68          |0.48        |8.743      |5.060                |
+------------+------------+-----------+---------------------+
|69          |0.46        |8.902      |4.901                |
+------------+------------+-----------+---------------------+
|70          |0.44        |9.062      |4.741                |
+------------+------------+-----------+---------------------+
|71          |0.42        |9.225      |4.578                |
+------------+------------+-----------+---------------------+
|72          |0.40        |9.389      |4.414                |
+------------+------------+-----------+---------------------+
|73          |0.38        |9.556      |4.247                |
+------------+------------+-----------+---------------------+
|74          |0.36        |9.724      |4.079                |
+------------+------------+-----------+---------------------+
|75          |0.35        |9.837      |3.966                |
+------------+------------+-----------+---------------------+
|76          |0.33        |10.009     |3.794                |
+------------+------------+-----------+---------------------+
|77          |0.31        |10.182     |3.621                |
+------------+------------+-----------+---------------------+
|78          |0.30        |10.299     |3.504                |
+------------+------------+-----------+---------------------+
|79          |0.27        |10.535     | 3.269               |
+------------+------------+-----------+---------------------+
|80          |0.26        |10.654     | 3.149               |
+------------+------------+-----------+---------------------+
|81          |0.24        |10.834     | 2.969               |
+------------+------------+-----------+---------------------+
|82          |0.23        |11.016     | 2.787               |
+------------+------------+-----------+---------------------+
|83          |0.21        |11.138     | 2.665               |
+------------+------------+-----------+---------------------+
|84          |0.20        |11.323     | 2.480               |
+------------+------------+-----------+---------------------+
|85          |0.18        |11.509     | 2.294               |
+------------+------------+-----------+---------------------+
|86          |0.17        |11.635     | 2.169               |
+------------+------------+-----------+---------------------+
|87          |0.15        |11.824     | 1.979               |
+------------+------------+-----------+---------------------+
|88          |0.14        |11.951     | 1.852               |
+------------+------------+-----------+---------------------+
|89          |0.13        |12.143     | 1.660               |
+------------+------------+-----------+---------------------+
|90          |0.11        |12.337     | 1.466               |
+------------+------------+-----------+---------------------+
|91          |0.10        |12.467     | 1.336               |
+------------+------------+-----------+---------------------+
|92          |0.08        |12.663     | 1.140               |
+------------+------------+-----------+---------------------+
|93          |0.07        |12.795     | 1.008               |
+------------+------------+-----------+---------------------+
|94          |0.06        |12.993     | 0.810               |
+------------+------------+-----------+---------------------+
|95          |0.05        |13.127     | 0.676               |
+------------+------------+-----------+---------------------+
|96          |0.03        |13.328     | 0.475               |
+------------+------------+-----------+---------------------+
|97          |0.02        |13.463     | 0.340               |
+------------+------------+-----------+---------------------+
|98          |0.01        |13.667     | 0.136               |
+------------+------------+-----------+---------------------+
|99          |0.00        |13.803     | 0.000               |
+------------+------------+-----------+---------------------+
*ages and lookback time from IllustrisTNG300 documentation, and therefore their assumed cosmology
.. raw:: html

   </details>
   <br />
